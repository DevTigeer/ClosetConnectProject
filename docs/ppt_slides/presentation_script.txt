ClosetConnect 포트폴리오 발표 대본
=====================================

[슬라이드 1: 프로젝트 소개]
----------------------------
안녕하세요. ClosetConnect 프로젝트를 발표하겠습니다.
이 프로젝트는 AI 기반 디지털 옷장 플랫폼입니다.
사용자가 옷 사진을 업로드하면 AI가 자동으로 배경을 제거하고, 의류를 분류하며, 깔끔한 결과물을 제공합니다.
저는 기획부터 배포까지 전 과정을 직접 수행했으며, 특히 비동기 처리와 실시간 진행도 시스템 설계에 집중했습니다.
오늘 발표는 결과물을 먼저 보여드린 후, 제작 의도와 기술적 선택의 이유를 설명하겠습니다.


[슬라이드 2: 결과물 데모]
----------------------------
먼저 결과물부터 보여드리겠습니다.
사용자가 옷 사진을 업로드하면, 화면에 실시간으로 진행률이 표시됩니다.
25%에서 배경 제거, 50%에서 세그멘테이션, 70%에서 이미지 확장, 95%에서 인페인팅이 완료됩니다.
최종적으로 4가지 버전의 이미지가 생성되고, AI가 "이건 상의입니다"라고 카테고리를 추천합니다.
사용자가 확인 버튼을 누르면 CONFIRMED 상태가 되어 옷장에 저장됩니다.
전체 프로세스는 약 20~30초 내외입니다.


[슬라이드 3: 기술 증거 - 메시지 흐름]
----------------------------
기술적으로 어떻게 동작하는지 설명드리겠습니다.
업로드 API가 호출되면 Spring이 파일을 저장하고, Cloth 엔티티를 PROCESSING 상태로 생성합니다.
동시에 RabbitMQ의 cloth.processing 큐로 메시지를 발행합니다.
Python Worker가 이 메시지를 받아 AI 파이프라인을 실행하면서, 각 단계마다 progress 큐로 진행률을 보냅니다.
Spring의 Consumer가 이를 받아 STOMP WebSocket으로 프론트엔드에 전달합니다.
프론트는 SockJS로 연결되어 있어 실시간으로 프로그레스 바가 업데이트됩니다.
이렇게 3개 큐, 2개 컨슈머, 1개 WebSocket으로 실시간 UX를 구현했습니다.


[슬라이드 4: 문제 정의]
----------------------------
이 프로젝트를 시작한 이유입니다.
옷장 앱을 만들려면 사용자가 올린 사진을 깔끔하게 가공해야 합니다.
그런데 AI 처리는 5초에서 30초까지 걸릴 수 있습니다.
일반적인 동기 API로 처리하면 프론트엔드 요청이 타임아웃 될 수 있고, 사용자는 "얼마나 기다려야 하지?"라는 불확실함을 느낍니다.
또한 AI가 잘못 처리한 결과를 바로 저장하면 데이터 품질이 떨어집니다.
그래서 비동기 처리, 실시간 진행도, 사용자 확인 후 확정이라는 3가지 전략을 도입했습니다.


[슬라이드 5: 컨셉 & 차별점]
----------------------------
제품 컨셉은 단순합니다. 사진 한 장 업로드하면 나머지는 AI가 알아서 합니다.
기술적으로는 이벤트 기반 비동기 아키텍처를 채택했습니다.
핵심 차별점은 세 가지입니다.
첫째, RabbitMQ를 3개 큐로 분리해서 처리 요청, 진행도, 결과를 독립적으로 관리합니다.
둘째, WebSocket으로 실시간 피드백을 주어 사용자가 "지금 어디까지 됐지?"를 항상 알 수 있습니다.
셋째, 처리 완료 후 바로 저장하지 않고 사용자 확인을 거쳐 데이터 품질을 보장합니다.


[슬라이드 6: 시스템 아키텍처]
----------------------------
전체 아키텍처입니다.
프론트엔드는 React로 개발해 Vercel에 배포했습니다.
백엔드는 Spring Boot로 Railway에 배포했고, 같은 Railway에서 MariaDB와 RabbitMQ도 운영합니다.
AI 서비스는 FastAPI로 개발해 Google Cloud Run에 배포했습니다.
Cloud Run은 요청이 없으면 인스턴스를 0으로 줄이고, 요청이 오면 자동으로 스케일업합니다.
통신은 3가지 패턴을 사용합니다. REST API, RabbitMQ 메시지, WebSocket 실시간 통신입니다.


[슬라이드 7: 상태 전이 다이어그램]
----------------------------
Cloth 엔티티의 상태 전이입니다.
처음 업로드가 시작되면 UPLOADING, 파일이 저장되고 MQ로 전송되면 PROCESSING이 됩니다.
AI 처리가 끝나면 READY_FOR_REVIEW가 되어 사용자에게 결과를 보여줍니다.
사용자가 확인 버튼을 누르면 COMPLETED가 되어 최종 저장됩니다.
만약 AI 처리 중 오류가 나면 FAILED가 됩니다.
이 상태 머신 덕분에 "지금 이 옷이 어떤 단계에 있는지" 명확히 추적할 수 있고, 실패한 건만 따로 재처리할 수 있습니다.
AI 파이프라인은 4단계로 구성됩니다. 배경 제거(25%), 세그멘테이션(50%), 이미지 확장(70%), 인페인팅(95%)입니다.


=====================================
한 문장 요약 (30자)
=====================================
"비동기 AI 처리 + 실시간 진행도 = 스마트 옷장"


=====================================
차별점 3개
=====================================
1. 3-큐 RabbitMQ 아키텍처로 처리/진행/결과 분리하여 역할 명확화
2. WebSocket 실시간 피드백으로 긴 AI 처리도 사용자가 기다리지 않는 UX
3. 5단계 상태 머신으로 데이터 라이프사이클 추적 및 품질 보장


=====================================
예상 질문 & 답변
=====================================

Q1. 왜 RabbitMQ를 선택했나요? Kafka는?
A: 이 프로젝트는 고처리량보다 "메시지별 확실한 처리"가 중요합니다.
   RabbitMQ의 Direct Exchange와 ACK 기반 전달 보장이 적합했습니다.
   Kafka는 대용량 스트리밍에 강하지만, 이 규모에서는 오버스펙입니다.

Q2. WebSocket 연결이 끊기면 어떻게 되나요?
A: SockJS Fallback이 있어 WebSocket이 안 되면 Long Polling으로 전환됩니다.
   또한 DB에 progressPercentage를 저장해두므로,
   재접속 시 GET /cloth/{id}/status로 현재 상태를 조회할 수 있습니다.

Q3. AI 처리가 실패하면?
A: Cloth 상태가 FAILED로 마킹됩니다.
   현재는 수동 재처리가 필요하며,
   향후 Dead Letter Queue와 자동 재시도 정책을 도입할 예정입니다.

Q4. 비용은 어떻게 관리하나요?
A: Cloud Run은 0 스케일링으로 요청 없을 때 비용 없음.
   API 호출 최적화 수치는 추후 측정 예정.
   예정: UI에서 선택적 파이프라인 실행으로 불필요한 AI 호출 감소

Q5. 테스트는 어떻게 하셨나요?
A: 현재 139개의 단위 테스트가 작성되어 있습니다. JUnit5 + Mockito 사용.
   통합 테스트와 E2E 테스트는 확대할 예정입니다.
