# Nixpacks configuration for Railway
# This is a backup configuration in case Dockerfile is not used

[phases.setup]
nixPkgs = ["jdk17"]

[phases.build]
cmds = [
    "chmod +x ./gradlew",
    "./gradlew build -x test --no-daemon"
]

[phases.install]
cmds = ["mkdir -p uploads"]

[start]
# Memory optimized for Railway (512MB plan)
cmd = "java -Xmx320m -Xms192m -XX:MaxMetaspaceSize=128m -XX:+UseSerialGC -XX:+UseContainerSupport -jar build/libs/*.jar"
