# 기술 선택 보고서

**작성일**: 2024-12-30
**작성자**: Development Team
**버전**: 1.0

---

## 📌 요약

ClosetConnect 프로젝트에서 선택한 주요 기술 스택과 그 선택 이유, 대안 기술, 비용/성능/리스크를 분석합니다.

---

## 1. Backend Framework

### 선택: Spring Boot 3.5.7 (Java 17)

#### 대안 기술
1. **Node.js (Express, NestJS)**
   - 장점: 빠른 개발, JavaScript 풀스택
   - 단점: 대규모 프로젝트 시 타입 안정성 낮음

2. **Django (Python)**
   - 장점: AI 서버와 같은 언어, ORM 강력
   - 단점: 성능이 Java보다 낮음

3. **Go (Gin, Echo)**
   - 장점: 빠른 성능, 동시성 처리 우수
   - 단점: 생태계 작음, 학습 곡선 높음

#### 선택 이유
- **성숙한 생태계**: Spring Security, Spring Data JPA, Spring Boot Actuator 등 엔터프라이즈급 기능
- **타입 안정성**: Java의 강타입 시스템으로 런타임 에러 감소
- **성능**: JVM 기반으로 높은 처리량
- **커뮤니티**: 국내 개발자 커뮤니티 활발, 레퍼런스 많음

#### 비용/성능/리스크
- **비용**: 무료 (오픈소스)
- **성능**: TPS 1000+ 가능 (단일 서버)
- **리스크**: 메모리 사용량 높음 (최소 512MB), 컨테이너 이미지 크기 큼

---

## 2. Frontend Framework

### 선택: React 18 + Vite

#### 대안 기술
1. **Vue.js 3**
   - 장점: 학습 곡선 낮음, 한국어 문서 풍부
   - 단점: 생태계가 React보다 작음

2. **Svelte**
   - 장점: 빠른 성능, 작은 번들 크기
   - 단점: 생태계 작음, 레퍼런스 부족

3. **Next.js**
   - 장점: SSR, SEO 최적화
   - 단점: 현재 프로젝트는 SPA가 적합

#### 선택 이유
- **Component 재사용성**: UI 컴포넌트 재사용 용이
- **생태계**: React Router, React Query, 다양한 UI 라이브러리
- **Vite**: 빠른 개발 서버, HMR(Hot Module Replacement)
- **취업 시장**: React 수요가 가장 높음

#### 비용/성능/리스크
- **비용**: 무료
- **성능**: 초기 로딩 ~1초, FCP 1.5초 이내
- **리스크**: SEO 약함 (현재는 문제 없음, 향후 Next.js 전환 고려)

---

## 3. AI 프레임워크

### 선택: Python + FastAPI + Google Gemini Imagen 3

#### 대안 기술

**가상 Try-On 모델**:
1. **VITON-HD, HR-VITON**
   - 장점: Try-On 전용 모델
   - 단점: GPU 필수, 품질 낮음

2. **Stable Diffusion Inpainting**
   - 장점: 커스터마이징 가능
   - 단점: 프롬프트 엔지니어링 어려움, GPU 필수

**이미지 생성 API**:
3. **OpenAI DALL-E 3**
   - 장점: 고품질
   - 단점: 비용 높음 ($0.08/image)

4. **Midjourney**
   - 장점: 최고 품질
   - 단점: API 없음, Discord 기반

#### 선택 이유
- **Gemini Imagen 3**: API 방식으로 GPU 서버 불필요, 고품질, 합리적 비용
- **FastAPI**: 빠른 성능, 비동기 지원, OpenAPI 자동 생성
- **rembg, U2Net, LaMa**: 검증된 오픈소스 모델, 무료

#### 비용/성능/리스크
- **비용**:
  - Gemini API: $0.04/image (월 500회 기준 $20)
  - rembg, U2Net, LaMa: 무료 (로컬 실행)
- **성능**:
  - 배경 제거: 5-10초
  - 세그멘테이션: 10-15초
  - 인페인팅: 15-20초
  - Gemini Try-On: 5-10초
- **리스크**:
  - Gemini API 장애 시 서비스 중단 → Fallback 메시지
  - GPU 없이 CPU만 사용 시 느림 → 비동기 큐로 대응

---

## 4. 메시지 큐

### 선택: RabbitMQ

#### 대안 기술
1. **Apache Kafka**
   - 장점: 대용량 처리, 로그 저장
   - 단점: 오버엔지니어링, 운영 복잡도 높음

2. **Redis Pub/Sub**
   - 장점: 빠름, Redis 이미 사용 중이면 추가 비용 없음
   - 단점: 메시지 영속성 낮음

3. **AWS SQS**
   - 장점: 관리형, 확장성 좋음
   - 단점: 비용 발생, AWS 종속

#### 선택 이유
- **Task Queue 패턴에 적합**: AI 처리는 일회성 작업
- **메시지 영속성**: 서버 재시작 시에도 작업 유실 안 됨
- **재시도 및 DLQ**: 실패 시 재시도, Dead Letter Queue 지원
- **무료**: 오픈소스, 자체 호스팅

#### 비용/성능/리스크
- **비용**: 무료 (자체 호스팅)
- **성능**: 10,000 메시지/초 처리 가능
- **리스크**: 단일 장애점 (클러스터링으로 해결 가능, Phase 2)

---

## 5. 데이터베이스

### 선택: MariaDB 10.x

#### 대안 기술
1. **PostgreSQL**
   - 장점: JSON 타입 지원, 확장성 좋음
   - 단점: MySQL보다 학습 곡선 높음

2. **MongoDB**
   - 장점: 스키마 유연성, 확장성
   - 단점: 관계형 데이터에 부적합, 트랜잭션 약함

3. **MySQL**
   - 장점: MariaDB와 거의 동일
   - 단점: Oracle 정책 변화 리스크

#### 선택 이유
- **MySQL 호환**: MySQL과 완벽 호환, 마이그레이션 용이
- **오픈소스**: 완전 오픈소스, 라이선스 이슈 없음
- **성능**: InnoDB 스토리지 엔진, 트랜잭션 지원
- **Spring Boot 기본 지원**: JPA, Hibernate 완벽 호환

#### 비용/성능/리스크
- **비용**: 무료
- **성능**: 1,000 TPS 이상 가능
- **리스크**: 대규모 데이터 시 샤딩 필요 (PostgreSQL로 전환 고려)

---

## 6. 인증 방식

### 선택: JWT (JSON Web Token)

#### 대안 기술
1. **Session 기반 인증**
   - 장점: 구현 간단, 토큰 무효화 쉬움
   - 단점: 확장성 낮음, 서버 상태 저장 필요

2. **OAuth 2.0**
   - 장점: 보안 강화, 소셜 로그인
   - 단점: 구현 복잡도 높음

#### 선택 이유
- **Stateless**: 서버 상태 저장 불필요, 수평 확장 용이
- **모바일 대응**: 향후 모바일 앱 개발 시 동일 API 사용 가능
- **MSA 준비**: 서버 간 상태 공유 불필요

#### 비용/성능/리스크
- **비용**: 무료
- **성능**: 토큰 검증 속도 빠름
- **리스크**: 토큰 탈취 시 무효화 어려움 → 유효기간 짧게 설정 (1시간)

---

## 7. 결제 시스템

### 선택: TossPayments

#### 대안 기술
1. **KakaoPay**
   - 장점: 국내 점유율 높음
   - 단점: 개발자 친화적이지 않음

2. **PayPal**
   - 장점: 글로벌 지원
   - 단점: 국내 사용자에게 낯설음, 수수료 높음

3. **Stripe**
   - 장점: 개발자 친화적, API 우수
   - 단점: 국내 사용자 적음

#### 선택 이유
- **국내 최적화**: 한국 사용자에게 익숙한 결제 수단
- **개발자 친화적**: API 문서 우수, SDK 제공
- **에스크로**: 구매자 보호 (안전거래)
- **합리적 수수료**: 3.3% + VAT

#### 비용/성능/리스크
- **비용**: 거래 수수료 3.3% + VAT (고정)
- **성능**: 결제 응답 속도 ~1초
- **리스크**: TossPayments 장애 시 결제 불가 → 다른 PG사 추가 고려

---

## 8. 배포 환경 (현재)

### 선택: 단일 서버 (로컬/VPS)

#### 대안 기술
1. **AWS (EC2 + RDS + S3)**
   - 장점: 확장성, 관리형 서비스
   - 단점: 비용 발생 (월 $50+)

2. **Docker + Kubernetes**
   - 장점: 컨테이너 기반, 자동 확장
   - 단점: 운영 복잡도 높음

#### 선택 이유
- **MVP 단계**: 단일 서버로 충분
- **비용 절감**: 무료 또는 저비용
- **빠른 개발**: 인프라 복잡도 최소화

#### 향후 계획
- **Phase 2**: AWS 전환 (EC2 + RDS + S3)
- **Phase 3**: Kubernetes 기반 MSA

---

## 변경 이력

| 날짜 | 버전 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| 2024-12-30 | 1.0 | Development Team | 초기 문서 작성 |
